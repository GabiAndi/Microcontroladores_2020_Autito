#ifndef INC_ADC_H_
#define INC_ADC_H_

/**********************************************************************************/
/*********************************** Includes *************************************/
/**********************************************************************************/
#include "system.h"
/**********************************************************************************/
/**********************************************************************************/
/**********************************************************************************/

/**********************************************************************************/
/*********************************** Defines **************************************/
/**********************************************************************************/

/************************** Tama√±o del buffer de datos ****************************/
#define ADC_BUFFER_LENGTH			60
/**********************************************************************************/

/**********************************************************************************/
/**********************************************************************************/
/**********************************************************************************/

/**********************************************************************************/
/*********************************** Typedef **************************************/
/**********************************************************************************/
typedef struct
{
	volatile uint16_t data[ADC_BUFFER_LENGTH][6];

	volatile uint8_t data_index;

	volatile uint16_t mean[6];

	system_ring_buffer_t *buffer_write;
}adc_buffer_t;
/**********************************************************************************/
/**********************************************************************************/
/**********************************************************************************/

/**********************************************************************************/
/********************************** Funciones *************************************/
/**********************************************************************************/

/*
 * Funcion que inicia el ADC
 *
 */
void adc_init(void);

/*
 * Funcion inicia la captura de datos
 *
 */
void adc_capture(void);

/*
 * Funcion que establece el destino de los datos capturados
 *
 * Se establece en que buffer se enviara el comando de datos.
 *
 */
void adc_set_buffer_send_data(system_ring_buffer_t *buffer, uint32_t ms);

/*
 * Funcion que envia los datos del ADC a la PC
 *
 * Cada un cierto periodo de tiempo seteado con un comando,
 * se envian los datos almacenados del ADC.
 *
 */
void adc_send_data(void);
/**********************************************************************************/
/**********************************************************************************/
/**********************************************************************************/

#endif /* INC_ADC_H_ */
